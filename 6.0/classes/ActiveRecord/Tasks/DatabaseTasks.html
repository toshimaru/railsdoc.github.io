<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <link href="/assets/css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css">
  <link rel="apple-touch-icon" href="icon.png">
  <meta name="theme-color" content="#fafafa">
  <link href="https://fonts.googleapis.com/css?family=Asap" rel="stylesheet">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ActiveRecord::Tasks::DatabaseTasks | RailsDoc(β)</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="ActiveRecord::Tasks::DatabaseTasks" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ruby on Rails API Documentation." />
<meta property="og:description" content="Ruby on Rails API Documentation." />
<link rel="canonical" href="https://railsdoc.github.io/6.0/classes/ActiveRecord/Tasks/DatabaseTasks.html" />
<meta property="og:url" content="https://railsdoc.github.io/6.0/classes/ActiveRecord/Tasks/DatabaseTasks.html" />
<meta property="og:site_name" content="RailsDoc(β)" />
<meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="twitter:title" content="ActiveRecord::Tasks::DatabaseTasks" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Ruby on Rails API Documentation.","headline":"ActiveRecord::Tasks::DatabaseTasks","image":"https://avatars.githubusercontent.com/u/4223","url":"https://railsdoc.github.io/6.0/classes/ActiveRecord/Tasks/DatabaseTasks.html"}</script>
<!-- End Jekyll SEO tag -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134470810-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-134470810-1');

    window.config = {
      rootPath: "/6.0/"
    }
  </script>
</head>
<body>
  <header class="navbar navbar-dark navbar-expand bg-dark flex-md-nowrap p-0 shadow sticky-header">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="/">RailsDoc(β)</a>
    <form class="w-100 d-none d-md-flex" action="/search" method="get">
      <input id="search-form" class="form-control form-control-dark" type="text" placeholder="Search" aria-label="Search" name="q">
    </form>

    <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex px-1">
      <li class="nav-item text-nowrap p-1">
        <div class="dropdown">
          <a class="dropdown-toggle nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            v6.0
          </a>
          <div class="dropdown-menu dropdown-menu-md-right" aria-labelledby="dropdownMenuLink">
            
    
    
    
        <a class="dropdown-item" href="/">v7.1</a>
    

    
    
    
        <a class="dropdown-item" href="/7.0/">v7.0</a>
    

    
    
    
        <a class="dropdown-item" href="/6.1/">v6.1</a>
    

    
    
    
        <a class="dropdown-item" href="/6.0/">v6.0</a>
    

    
    
    
        <a class="dropdown-item" href="/5.2/">v5.2</a>
    


          </div>
        </div>
      </li>
      <li class="nav-item text-nowrap p-1">
        <a class="nav-link p-2" href="https://github.com/railsdoc/railsdoc.github.io">GitHub</a>
      </li>
    </ul>
  </header>

  <div class="container-fluid">
    <div class="row">
      <nav class="col-12 col-md-3 col-xl-2 d-none d-md-block bg-light sidebar-sticky">
        <div id="navigation" class="sidebar-content">
        </div>
      </nav>

      <div class="col-12 col-md-3 col-xl-2 toc-content-sticky">
        <div class="toc-content"><ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#methods">Methods</a></li>
<li class="toc-entry toc-h2"><a href="#constants">Constants</a></li>
<li class="toc-entry toc-h2"><a href="#attributes">Attributes</a></li>
<li class="toc-entry toc-h2"><a href="#class-public-methods">Class Public methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-c-structure_dump_flags">
            
              structure_dump_flags
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-c-structure_load_flags">
            
              structure_load_flags
            
          </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#instance-public-methods">Instance Public methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-i-cache_dump_filename">
            
              cache_dump_filename(namespace)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-charset">
            
              charset(*arguments)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-charset_current">
            
              charset_current(environment = env, specification_name = spec)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-check_protected_environments-21">
            
              check_protected_environments!()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-check_schema_file">
            
              check_schema_file(filename)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-check_target_version">
            
              check_target_version()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-collation">
            
              collation(*arguments)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-collation_current">
            
              collation_current(environment = env, specification_name = spec)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-create">
            
              create(*arguments)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-create_all">
            
              create_all()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-create_current">
            
              create_current(environment = env, spec_name = nil)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-current_config">
            
              current_config(options = {})
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-db_dir">
            
              db_dir()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-drop">
            
              drop(*arguments)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-drop_all">
            
              drop_all()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-drop_current">
            
              drop_current(environment = env)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-dump_filename">
            
              dump_filename(namespace, format = ActiveRecord::Base.schema_format)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-dump_schema_cache">
            
              dump_schema_cache(conn, filename)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-env">
            
              env()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-fixtures_path">
            
              fixtures_path()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-for_each">
            
              for_each(databases)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-load_schema_current">
            
              load_schema_current(format = ActiveRecord::Base.schema_format, file = nil, environment = env)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-load_seed">
            
              load_seed()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-migrate">
            
              migrate()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-migrate_status">
            
              migrate_status()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-migrations_paths">
            
              migrations_paths()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-purge">
            
              purge(configuration)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-purge_all">
            
              purge_all()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-purge_current">
            
              purge_current(environment = env)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-raise_for_multi_db">
            
              raise_for_multi_db(environment = env, command:)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-register_task">
            
              register_task(pattern, task)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-root">
            
              root()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-schema_file">
            
              schema_file(format = ActiveRecord::Base.schema_format)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-schema_file_type">
            
              schema_file_type(format = ActiveRecord::Base.schema_format)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-schema_up_to_date-3F">
            
              schema_up_to_date?(configuration, format = ActiveRecord::Base.schema_format, file = nil, environment = env, spec_name = &quot;primary&quot;)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-seed_loader">
            
              seed_loader()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-setup_initial_database_yaml">
            
              setup_initial_database_yaml()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-spec">
            
              spec()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-structure_dump">
            
              structure_dump(*arguments)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-structure_load">
            
              structure_load(*arguments)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-target_version">
            
              target_version()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-truncate_all">
            
              truncate_all(environment = env)
            
          </a></li>
</ul>
</li>
</ul></div>
      </div>

      <main role="main" class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-4">
        <div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 6.0.6</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActiveRecord::Tasks::DatabaseTasks
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/activerecord/lib/active_record/tasks/database_tasks_rb.html">activerecord/lib/active_record/tasks/database_tasks.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="DatabaseTasks.html"><code>ActiveRecord::Tasks::DatabaseTasks</code></a> is a utility class, which encapsulates logic behind common tasks used to manage database and migrations.</p>

<p>The tasks defined here are used with Rails commands provided by Active Record.</p>

<p>In order to use <a href="DatabaseTasks.html"><code>DatabaseTasks</code></a>, a few config values need to be set. All the needed config values are set by Rails already, so it&#39;s necessary to do it only if you want to change the defaults or when you want to use Active Record outside of Rails (in such case after configuring the database tasks, you can also use the rake tasks defined in Active Record).</p>

<p>The possible config values are:</p>
<ul><li>
<p><code>env</code>: current environment (like <a href="../../Rails.html#method-c-env"><code>Rails.env</code></a>).</p>
</li><li>
<p><code>database_configuration</code>: configuration of your databases (as in <code>config/database.yml</code>).</p>
</li><li>
<p><code>db_dir</code>: your <code>db</code> directory.</p>
</li><li>
<p><code>fixtures_path</code>: a path to fixtures directory.</p>
</li><li>
<p><code>migrations_paths</code>: a list of paths to directories with migrations.</p>
</li><li>
<p><code>seed_loader</code>: an object which will load seeds, it needs to respond to the <code>load_seed</code> method.</p>
</li><li>
<p><code>root</code>: a path to the root of the application.</p>
</li></ul>

<p>Example usage of <a href="DatabaseTasks.html"><code>DatabaseTasks</code></a> outside Rails could look as such:</p>

<pre><code>include ActiveRecord::Tasks
DatabaseTasks.database_configuration = YAML.load_file(&#39;my_database_config.yml&#39;)
DatabaseTasks.db_dir = &#39;db&#39;
# other settings...

DatabaseTasks.create_current(&#39;production&#39;)
</code></pre>

    </div>
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-cache_dump_filename">cache_dump_filename</a>
        </li>
      
        <li>
          <a href="#method-i-charset">charset</a>
        </li>
      
        <li>
          <a href="#method-i-charset_current">charset_current</a>
        </li>
      
        <li>
          <a href="#method-i-check_protected_environments-21">check_protected_environments!</a>
        </li>
      
        <li>
          <a href="#method-i-check_schema_file">check_schema_file</a>
        </li>
      
        <li>
          <a href="#method-i-check_target_version">check_target_version</a>
        </li>
      
        <li>
          <a href="#method-i-collation">collation</a>
        </li>
      
        <li>
          <a href="#method-i-collation_current">collation_current</a>
        </li>
      
        <li>
          <a href="#method-i-create">create</a>
        </li>
      
        <li>
          <a href="#method-i-create_all">create_all</a>
        </li>
      
        <li>
          <a href="#method-i-create_current">create_current</a>
        </li>
      
        <li>
          <a href="#method-i-current_config">current_config</a>
        </li>
      
        <li>
          <a href="#method-i-db_dir">db_dir</a>
        </li>
      
        <li>
          <a href="#method-i-drop">drop</a>
        </li>
      
        <li>
          <a href="#method-i-drop_all">drop_all</a>
        </li>
      
        <li>
          <a href="#method-i-drop_current">drop_current</a>
        </li>
      
        <li>
          <a href="#method-i-dump_filename">dump_filename</a>
        </li>
      
        <li>
          <a href="#method-i-dump_schema_cache">dump_schema_cache</a>
        </li>
      
        <li>
          <a href="#method-i-env">env</a>
        </li>
      
        <li>
          <a href="#method-i-fixtures_path">fixtures_path</a>
        </li>
      
        <li>
          <a href="#method-i-for_each">for_each</a>
        </li>
      
        <li>
          <a href="#method-i-load_schema_current">load_schema_current</a>
        </li>
      
        <li>
          <a href="#method-i-load_seed">load_seed</a>
        </li>
      
        <li>
          <a href="#method-i-migrate">migrate</a>
        </li>
      
        <li>
          <a href="#method-i-migrate_status">migrate_status</a>
        </li>
      
        <li>
          <a href="#method-i-migrations_paths">migrations_paths</a>
        </li>
      
        <li>
          <a href="#method-i-purge">purge</a>
        </li>
      
        <li>
          <a href="#method-i-purge_all">purge_all</a>
        </li>
      
        <li>
          <a href="#method-i-purge_current">purge_current</a>
        </li>
      
        <li>
          <a href="#method-i-raise_for_multi_db">raise_for_multi_db</a>
        </li>
      
        <li>
          <a href="#method-i-register_task">register_task</a>
        </li>
      
        <li>
          <a href="#method-i-root">root</a>
        </li>
      
        <li>
          <a href="#method-i-schema_file">schema_file</a>
        </li>
      
        <li>
          <a href="#method-i-schema_file_type">schema_file_type</a>
        </li>
      
        <li>
          <a href="#method-i-schema_up_to_date-3F">schema_up_to_date?</a>
        </li>
      
        <li>
          <a href="#method-i-seed_loader">seed_loader</a>
        </li>
      
        <li>
          <a href="#method-i-setup_initial_database_yaml">setup_initial_database_yaml</a>
        </li>
      
        <li>
          <a href="#method-i-spec">spec</a>
        </li>
      
        <li>
          <a href="#method-i-structure_dump">structure_dump</a>
        </li>
      
        <li>
          <a href="#method-c-structure_dump_flags">structure_dump_flags</a>
        </li>
      
        <li>
          <a href="#method-i-structure_load">structure_load</a>
        </li>
      
        <li>
          <a href="#method-c-structure_load_flags">structure_load_flags</a>
        </li>
      
        <li>
          <a href="#method-i-target_version">target_version</a>
        </li>
      
        <li>
          <a href="#method-i-truncate_all">truncate_all</a>
        </li>
      
    </ul>
  

  

  
    

    

    
      <!-- Section constants -->
      <h2 id="constants">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">LOCAL_HOSTS</td>
            <td>=</td>
            <td class="attr-value">[&quot;127.0.0.1&quot;, &quot;localhost&quot;]</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    

    
      <!-- Section attributes -->
      <h2 id="attributes">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>current_config</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>database_configuration</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>db_dir</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>env</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>fixtures_path</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>migrations_paths</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>root</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>seed_loader</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-structure_dump_flags">
            
              structure_dump_flags
            
          </h3>

          
            <div class="description">
              <p>Extra flags passed to database CLI tool (mysqldump/pg_dump) when calling db:structure:dump</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-structure_dump_flags_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 43</span>
<span class="ruby-identifier">mattr_accessor</span> <span class="ruby-value">:structure_dump_flags</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">false</span>
</code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-structure_load_flags">
            
              structure_load_flags
            
          </h3>

          
            <div class="description">
              <p>Extra flags passed to database CLI tool when calling db:structure:load</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-structure_load_flags_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 48</span>
<span class="ruby-identifier">mattr_accessor</span> <span class="ruby-value">:structure_load_flags</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">false</span>
</code></pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-cache_dump_filename">
            
              cache_dump_filename(namespace)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-cache_dump_filename_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 413</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cache_dump_filename</span>(<span class="ruby-identifier">namespace</span>)
  <span class="ruby-identifier">filename</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">namespace</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;primary&quot;</span>
    <span class="ruby-string">&quot;schema_cache.yml&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-node">&quot;#{namespace}_schema_cache.yml&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;SCHEMA_CACHE&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Tasks</span><span class="ruby-operator">::</span><span class="ruby-constant">DatabaseTasks</span>.<span class="ruby-identifier">db_dir</span>, <span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-charset">
            
              charset(*arguments)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-charset_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 276</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">charset</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">charset</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-charset_current">
            
              charset_current(environment = env, specification_name = spec)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-charset_current_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 272</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">charset_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>, <span class="ruby-identifier">specification_name</span> = <span class="ruby-identifier">spec</span>)
  <span class="ruby-identifier">charset</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>.<span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-identifier">environment</span>, <span class="ruby-value">spec_name:</span> <span class="ruby-identifier">specification_name</span>).<span class="ruby-identifier">config</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-check_protected_environments-21">
            
              check_protected_environments!()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-check_protected_environments-21_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_protected_environments!</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;DISABLE_DATABASE_ENVIRONMENT_CHECK&quot;</span>]
    <span class="ruby-identifier">current</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">current_environment</span>
    <span class="ruby-identifier">stored</span>  = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">last_stored_environment</span>

    <span class="ruby-keyword">if</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">protected_environment?</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ProtectedEnvironmentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">stored</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">stored</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">stored</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">current</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EnvironmentMismatchError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">current:</span> <span class="ruby-identifier">current</span>, <span class="ruby-value">stored:</span> <span class="ruby-identifier">stored</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">NoDatabaseError</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-check_schema_file">
            
              check_schema_file(filename)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-check_schema_file_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_schema_file</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-identifier">message</span> = <span class="ruby-node">+%{#{filename} doesn&#39;t exist yet. Run `rails db:migrate` to create it, then try again.}</span>
    <span class="ruby-identifier">message</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">%{ If you do not intend to use a database, you should instead alter #{Rails.root}/config/application.rb to limit the frameworks that will be loaded.}</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>)
    <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">abort</span> <span class="ruby-identifier">message</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-check_target_version">
            
              check_target_version()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-check_target_version_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 262</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_target_version</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target_version</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-constant">Migration</span><span class="ruby-operator">::</span><span class="ruby-constant">MigrationFilenameRegexp</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>]) <span class="ruby-operator">||</span> <span class="ruby-regexp">/\A\d+\z/</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>]))
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Invalid format of target version: `VERSION=#{ENV[&#39;VERSION&#39;]}`&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-collation">
            
              collation(*arguments)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-collation_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 285</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">collation</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">collation</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-collation_current">
            
              collation_current(environment = env, specification_name = spec)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-collation_current_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 281</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">collation_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>, <span class="ruby-identifier">specification_name</span> = <span class="ruby-identifier">spec</span>)
  <span class="ruby-identifier">collation</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>.<span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-identifier">environment</span>, <span class="ruby-value">spec_name:</span> <span class="ruby-identifier">specification_name</span>).<span class="ruby-identifier">config</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-create">
            
              create(*arguments)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-create_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Created database &#39;#{configuration[&#39;database&#39;]}&#39;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">DatabaseAlreadyExists</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Database &#39;#{configuration[&#39;database&#39;]}&#39; already exists&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Couldn&#39;t create &#39;#{configuration[&#39;database&#39;]}&#39; database. Please check your configuration.&quot;</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-create_all">
            
              create_all()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-create_all_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create_all</span>
  <span class="ruby-identifier">old_pool</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">retrieve_connection_pool</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection_specification_name</span>)
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span> <span class="ruby-identifier">create</span> <span class="ruby-identifier">configuration</span> }
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_pool</span>
    <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">old_pool</span>.<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_hash</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-create_current">
            
              create_current(environment = env, spec_name = nil)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-create_current_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 183</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>, <span class="ruby-identifier">spec_name</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>, <span class="ruby-identifier">spec_name</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">create</span> <span class="ruby-identifier">configuration</span>
  }
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-current_config">
            
              current_config(options = {})
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-current_config_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">current_config</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">reverse_merge!</span> <span class="ruby-value">env:</span> <span class="ruby-identifier">env</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:spec</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;primary&quot;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:config</span>)
    <span class="ruby-ivar">@current_config</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:config</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@current_config</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>.<span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:env</span>], <span class="ruby-value">spec_name:</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:spec</span>]).<span class="ruby-identifier">config</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-db_dir">
            
              db_dir()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-db_dir_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">db_dir</span>
  <span class="ruby-ivar">@db_dir</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-string">&quot;db&quot;</span>].<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-drop">
            
              drop(*arguments)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-drop_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 190</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">drop</span>
  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Dropped database &#39;#{configuration[&#39;database&#39;]}&#39;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">NoDatabaseError</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Database &#39;#{configuration[&#39;database&#39;]}&#39; does not exist&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Couldn&#39;t drop database &#39;#{configuration[&#39;database&#39;]}&#39;&quot;</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-drop_all">
            
              drop_all()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-drop_all_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 202</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop_all</span>
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drop</span> <span class="ruby-identifier">configuration</span> }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-drop_current">
            
              drop_current(environment = env)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-drop_current_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">drop</span> <span class="ruby-identifier">configuration</span>
  }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-dump_filename">
            
              dump_filename(namespace, format = ActiveRecord::Base.schema_format)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-dump_filename_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 403</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dump_filename</span>(<span class="ruby-identifier">namespace</span>, <span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">schema_format</span>)
  <span class="ruby-identifier">filename</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">namespace</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;primary&quot;</span>
    <span class="ruby-identifier">schema_file_type</span>(<span class="ruby-identifier">format</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-node">&quot;#{namespace}_#{schema_file_type(format)}&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;SCHEMA&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Tasks</span><span class="ruby-operator">::</span><span class="ruby-constant">DatabaseTasks</span>.<span class="ruby-identifier">db_dir</span>, <span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-dump_schema_cache">
            
              dump_schema_cache(conn, filename)
            
          </h3>

          
            <div class="description">
              <p>Dumps the schema cache in YAML format for the connection into the file</p>

<h4 id="method-i-dump_schema_cache-label-Examples-3A">Examples:</h4>

<pre><code>ActiveRecord::Tasks::DatabaseTasks.dump_schema_cache(ActiveRecord::Base.connection, &quot;tmp/schema_dump.yaml&quot;)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-dump_schema_cache_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 452</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dump_schema_cache</span>(<span class="ruby-identifier">conn</span>, <span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">clear!</span>
  <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">data_sources</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">table</span><span class="ruby-operator">|</span> <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">table</span>) }
  <span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-string">&quot;wb&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-constant">YAML</span>.<span class="ruby-identifier">dump</span>(<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">schema_cache</span>)) }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-env">
            
              env()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-env_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 102</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">env</span>
  <span class="ruby-ivar">@env</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-fixtures_path">
            
              fixtures_path()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-fixtures_path_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">fixtures_path</span>
  <span class="ruby-ivar">@fixtures_path</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;FIXTURES_PATH&quot;</span>]
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">root</span>, <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;FIXTURES_PATH&quot;</span>])
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">root</span>, <span class="ruby-string">&quot;test&quot;</span>, <span class="ruby-string">&quot;fixtures&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-for_each">
            
              for_each(databases)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-for_each_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">for_each</span>(<span class="ruby-identifier">databases</span>)
  <span class="ruby-keyword">return</span> {} <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">Rails</span>)

  <span class="ruby-identifier">database_configs</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">DatabaseConfigurations</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">databases</span>).<span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>)

  <span class="ruby-comment"># if this is a single database application we don&#39;t want tasks for each primary database</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">database_configs</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>

  <span class="ruby-identifier">database_configs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">db_config</span>.<span class="ruby-identifier">spec_name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-load_schema_current">
            
              load_schema_current(format = ActiveRecord::Base.schema_format, file = nil, environment = env)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-load_schema_current_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 423</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">load_schema_current</span>(<span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">schema_format</span>, <span class="ruby-identifier">file</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span>, <span class="ruby-identifier">spec_name</span>, <span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">load_schema</span>(<span class="ruby-identifier">configuration</span>, <span class="ruby-identifier">format</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">env</span>, <span class="ruby-identifier">spec_name</span>)
  }
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-load_seed">
            
              load_seed()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-load_seed_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 438</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">load_seed</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">seed_loader</span>
    <span class="ruby-identifier">seed_loader</span>.<span class="ruby-identifier">load_seed</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;You tried to load seed data, but no seed loader is specified. Please specify seed &quot;</span> \
          <span class="ruby-string">&quot;loader with ActiveRecord::Tasks::DatabaseTasks.seed_loader = your_seed_loader\n&quot;</span> \
          <span class="ruby-string">&quot;Seed loader should respond to load_seed method&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-migrate">
            
              migrate()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-migrate_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 232</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">migrate</span>
  <span class="ruby-identifier">check_target_version</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;SCOPE&quot;</span>]
  <span class="ruby-identifier">verbose_was</span>, <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span>, <span class="ruby-identifier">verbose?</span>

  <span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">migrate</span>(<span class="ruby-identifier">target_version</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">migration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">migration</span>.<span class="ruby-identifier">scope</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">clear_cache!</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-identifier">verbose_was</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-migrate_status">
            
              migrate_status()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-migrate_status_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 247</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">migrate_status</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">schema_migration</span>.<span class="ruby-identifier">table_exists?</span>
    <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">abort</span> <span class="ruby-string">&quot;Schema migrations table does not exist yet.&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># output</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\ndatabase: #{ActiveRecord::Base.connection_config[:database]}\n\n&quot;</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{&#39;Status&#39;.center(8)}  #{&#39;Migration ID&#39;.ljust(14)}  Migration Name&quot;</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;-&quot;</span> <span class="ruby-operator">*</span> <span class="ruby-value">50</span>
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">migrations_status</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">status</span>, <span class="ruby-identifier">version</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{status.center(8)}  #{version.ljust(14)}  #{name}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">puts</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-migrations_paths">
            
              migrations_paths()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-migrations_paths_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">migrations_paths</span>
  <span class="ruby-ivar">@migrations_paths</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-string">&quot;db/migrate&quot;</span>].<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-purge">
            
              purge(configuration)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-purge_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 290</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purge</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-identifier">configuration</span>).<span class="ruby-identifier">purge</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-purge_all">
            
              purge_all()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-purge_all_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purge_all</span>
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">purge</span> <span class="ruby-identifier">configuration</span>
  }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-purge_current">
            
              purge_current(environment = env)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-purge_current_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 300</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purge_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">purge</span> <span class="ruby-identifier">configuration</span>
  }
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-raise_for_multi_db">
            
              raise_for_multi_db(environment = env, command:)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-raise_for_multi_db_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 169</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">raise_for_multi_db</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>, <span class="ruby-value">command:</span>)
  <span class="ruby-identifier">db_configs</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>.<span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-identifier">environment</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">db_configs</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">dbs_list</span> = []

    <span class="ruby-identifier">db_configs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">db</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">dbs_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{command}:#{db.spec_name}&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;You&#39;re using a multiple database application. To use `#{command}` you must run the namespaced task with a VERSION. Available tasks are #{dbs_list.to_sentence}.&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-register_task">
            
              register_task(pattern, task)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-register_task_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 73</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">register_task</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">task</span>)
  <span class="ruby-ivar">@tasks</span> <span class="ruby-operator">||=</span> {}
  <span class="ruby-ivar">@tasks</span>[<span class="ruby-identifier">pattern</span>] = <span class="ruby-identifier">task</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-root">
            
              root()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-root_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">root</span>
  <span class="ruby-ivar">@root</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-schema_file">
            
              schema_file(format = ActiveRecord::Base.schema_format)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-schema_file_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 390</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema_file</span>(<span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">schema_format</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">db_dir</span>, <span class="ruby-identifier">schema_file_type</span>(<span class="ruby-identifier">format</span>))
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-schema_file_type">
            
              schema_file_type(format = ActiveRecord::Base.schema_format)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-schema_file_type_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 394</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema_file_type</span>(<span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">schema_format</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">format</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:ruby</span>
    <span class="ruby-string">&quot;schema.rb&quot;</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:sql</span>
    <span class="ruby-string">&quot;structure.sql&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-schema_up_to_date-3F">
            
              schema_up_to_date?(configuration, format = ActiveRecord::Base.schema_format, file = nil, environment = env, spec_name = &quot;primary&quot;)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-schema_up_to_date-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 341</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema_up_to_date?</span>(<span class="ruby-identifier">configuration</span>, <span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">schema_format</span>, <span class="ruby-identifier">file</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>, <span class="ruby-identifier">spec_name</span> = <span class="ruby-string">&quot;primary&quot;</span>)
  <span class="ruby-identifier">file</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">dump_filename</span>(<span class="ruby-identifier">spec_name</span>, <span class="ruby-identifier">format</span>)

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file</span>)

  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">InternalMetadata</span>.<span class="ruby-identifier">table_exists?</span>
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">InternalMetadata</span>[<span class="ruby-value">:schema_sha1</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">schema_sha1</span>(<span class="ruby-identifier">file</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-seed_loader">
            
              seed_loader()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-seed_loader_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">seed_loader</span>
  <span class="ruby-ivar">@seed_loader</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-setup_initial_database_yaml">
            
              setup_initial_database_yaml()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-setup_initial_database_yaml_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">setup_initial_database_yaml</span>
  <span class="ruby-keyword">return</span> {} <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">Rails</span>)

  <span class="ruby-keyword">begin</span>
    <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">load_database_yaml</span>
  <span class="ruby-keyword">rescue</span>
    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Rails couldn&#39;t infer whether you are using multiple databases from your database.yml and can&#39;t generate the tasks for the non-primary databases. If you&#39;d like to use this feature, please simplify your ERB.&quot;</span>

    {}
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-spec">
            
              spec()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-spec_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">spec</span>
  <span class="ruby-ivar">@spec</span> <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;primary&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-structure_dump">
            
              structure_dump(*arguments)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-structure_dump_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">structure_dump</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">delete_at</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">structure_dump</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">structure_dump_flags</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-structure_load">
            
              structure_load(*arguments)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-structure_load_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 313</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">structure_load</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">delete_at</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">structure_load</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">structure_load_flags</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-target_version">
            
              target_version()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-target_version_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 268</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">target_version</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>].<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-truncate_all">
            
              truncate_all(environment = env)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-truncate_all_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 226</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">truncate_all</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>.<span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-identifier">environment</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">truncate_tables</span> <span class="ruby-identifier">db_config</span>.<span class="ruby-identifier">config</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>

        <footer class="site-footer">
          <!-- <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span> -->
        </footer>
      </main>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.1/anchor.min.js" integrity="sha512-zPB79j2C+3sFS9zcA3vg/z6bVKzJVEyu9pY5w89akQRys76zpAT2t6S3wZKla3QQ14O5l/Yt0RUQ/DHXx82Y5g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="/assets/js/app.js"></script>
  <script src="/assets/js/search.js"></script>
</body>
</html>
