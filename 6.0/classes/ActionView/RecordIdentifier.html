<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <link href="/assets/css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/monokai.min.css">
  <link rel="apple-touch-icon" href="icon.png">
  <meta name="theme-color" content="#fafafa">
  <link href="https://fonts.googleapis.com/css?family=Asap" rel="stylesheet">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ActionView::RecordIdentifier | RailsDoc(β)</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="ActionView::RecordIdentifier" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ruby on Rails API Documentation." />
<meta property="og:description" content="Ruby on Rails API Documentation." />
<link rel="canonical" href="https://railsdoc.github.io/6.0/classes/ActionView/RecordIdentifier.html" />
<meta property="og:url" content="https://railsdoc.github.io/6.0/classes/ActionView/RecordIdentifier.html" />
<meta property="og:site_name" content="RailsDoc(β)" />
<meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="twitter:title" content="ActionView::RecordIdentifier" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Ruby on Rails API Documentation.","headline":"ActionView::RecordIdentifier","image":"https://avatars.githubusercontent.com/u/4223","url":"https://railsdoc.github.io/6.0/classes/ActionView/RecordIdentifier.html"}</script>
<!-- End Jekyll SEO tag -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134470810-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-134470810-1');

    window.config = {
      rootPath: "/6.0/"
    }
  </script>
</head>
<body>
  <header class="navbar navbar-dark navbar-expand bg-dark flex-md-nowrap p-0 shadow sticky-header">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="/">RailsDoc(β)</a>
    <form class="w-100 d-none d-md-flex" action="/search" method="get">
      <input id="search-form" class="form-control form-control-dark" type="text" placeholder="Search" aria-label="Search" name="q">
    </form>

    <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex px-1">
      <li class="nav-item text-nowrap p-1">
        <div class="dropdown">
          <a class="dropdown-toggle nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            v6.0
          </a>
          <div class="dropdown-menu dropdown-menu-md-right" aria-labelledby="dropdownMenuLink">
            <a class="dropdown-item" href="/">v7.0</a>
            
              
              <a class="dropdown-item" href="/6.1/">v6.1</a>
            
              
              <a class="dropdown-item" href="/6.0/">v6.0</a>
            
              
              <a class="dropdown-item" href="/5.2/">v5.2</a>
            
          </div>
        </div>
      </li>
      <li class="nav-item text-nowrap p-1">
        <a class="nav-link p-2" href="https://github.com/railsdoc/railsdoc.github.io">GitHub</a>
      </li>
    </ul>
  </header>

  <div class="container-fluid">
    <div class="row">
      <nav class="col-12 col-md-3 col-xl-2 d-none d-md-block bg-light sidebar-sticky">
        <div id="navigation" class="sidebar-content">
        </div>
      </nav>

      <div class="col-12 col-md-3 col-xl-2 toc-content-sticky">
        <div class="toc-content"><ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#methods">Methods</a></li>
<li class="toc-entry toc-h2"><a href="#constants">Constants</a></li>
<li class="toc-entry toc-h2"><a href="#instance-public-methods">Instance Public methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-i-dom_class">
            
              dom_class(record_or_class, prefix = nil)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-dom_id">
            
              dom_id(record, prefix = nil)
            
          </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#instance-private-methods">Instance Private methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-i-record_key_for_dom_id">
            
              record_key_for_dom_id(record)
            
          </a></li>
</ul>
</li>
</ul></div>
      </div>

      <main role="main" class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-4">
        <div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 6.0.6</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActionView::RecordIdentifier
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/actionview/lib/action_view/record_identifier_rb.html">actionview/lib/action_view/record_identifier.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="RecordIdentifier.html"><code>RecordIdentifier</code></a> encapsulates methods used by various <a href="../ActionView.html"><code>ActionView</code></a> helpers to associate records with DOM elements.</p>

<p>Consider for example the following code that form of post:</p>

<pre><code>&lt;%= form_for(post) do |f| %&gt;
  &lt;%= f.text_field :body %&gt;
&lt;% end %&gt;
</code></pre>

<p>When <code>post</code> is a new, unsaved <a href="../ActiveRecord/Base.html"><code>ActiveRecord::Base</code></a> instance, the resulting HTML is:</p>

<pre><code>&lt;form class=&quot;new_post&quot; id=&quot;new_post&quot; action=&quot;/posts&quot; accept-charset=&quot;UTF-8&quot; method=&quot;post&quot;&gt;
  &lt;input type=&quot;text&quot; name=&quot;post[body]&quot; id=&quot;post_body&quot; /&gt;
&lt;/form&gt;
</code></pre>

<p>When <code>post</code> is a persisted <a href="../ActiveRecord/Base.html"><code>ActiveRecord::Base</code></a> instance, the resulting HTML is:</p>

<pre><code>&lt;form class=&quot;edit_post&quot; id=&quot;edit_post_42&quot; action=&quot;/posts/42&quot; accept-charset=&quot;UTF-8&quot; method=&quot;post&quot;&gt;
  &lt;input type=&quot;text&quot; value=&quot;What a wonderful world!&quot; name=&quot;post[body]&quot; id=&quot;post_body&quot; /&gt;
&lt;/form&gt;
</code></pre>

<p>In both cases, the <code>id</code> and <code>class</code> of the wrapping DOM element are automatically generated, following naming conventions encapsulated by the <a href="RecordIdentifier.html"><code>RecordIdentifier</code></a> methods <a href="RecordIdentifier.html#method-i-dom_id"><code>dom_id</code></a> and <a href="RecordIdentifier.html#method-i-dom_class"><code>dom_class</code></a>:</p>

<pre><code>dom_id(Post.new)         # =&gt; &quot;new_post&quot;
dom_class(Post.new)      # =&gt; &quot;post&quot;
dom_id(Post.find 42)     # =&gt; &quot;post_42&quot;
dom_class(Post.find 42)  # =&gt; &quot;post&quot;
</code></pre>

<p>Note that these methods do not strictly require <code>Post</code> to be a subclass of <a href="../ActiveRecord/Base.html"><code>ActiveRecord::Base</code></a>. Any <code>Post</code> class will work as long as its instances respond to <code>to_key</code> and <code>model_name</code>, given that <code>model_name</code> responds to <code>param_key</code>. For instance:</p>

<pre><code>class Post
  attr_accessor :to_key

  def model_name
    OpenStruct.new param_key: &#39;post&#39;
  end

  def self.find(id)
    new.tap { |post| post.to_key = [id] }
  end
end
</code></pre>

    </div>
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-dom_class">dom_class</a>
        </li>
      
        <li>
          <a href="#method-i-dom_id">dom_id</a>
        </li>
      
        <li>
          <a href="#method-i-record_key_for_dom_id">record_key_for_dom_id</a>
        </li>
      
    </ul>
  

  

  
    

    

    
      <!-- Section constants -->
      <h2 id="constants">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">JOIN</td>
            <td>=</td>
            <td class="attr-value">&quot;_&quot;</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">NEW</td>
            <td>=</td>
            <td class="attr-value">&quot;new&quot;</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    

    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-dom_class">
            
              dom_class(record_or_class, prefix = nil)
            
          </h3>

          
            <div class="description">
              <p>The DOM class convention is to use the singular form of an object or class.</p>

<pre><code>dom_class(post)   # =&gt; &quot;post&quot;
dom_class(Person) # =&gt; &quot;person&quot;
</code></pre>

<p>If you need to address multiple instances of the same class in the same view, you can prefix the <a href="RecordIdentifier.html#method-i-dom_class"><code>dom_class</code></a>:</p>

<pre><code>dom_class(post, :edit)   # =&gt; &quot;edit_post&quot;
dom_class(Person, :edit) # =&gt; &quot;edit_person&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-dom_class_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionview/lib/action_view/record_identifier.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dom_class</span>(<span class="ruby-identifier">record_or_class</span>, <span class="ruby-identifier">prefix</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">singular</span> = <span class="ruby-identifier">model_name_from_record_or_class</span>(<span class="ruby-identifier">record_or_class</span>).<span class="ruby-identifier">param_key</span>
  <span class="ruby-identifier">prefix</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{prefix}#{JOIN}#{singular}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">singular</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-dom_id">
            
              dom_id(record, prefix = nil)
            
          </h3>

          
            <div class="description">
              <p>The DOM id convention is to use the singular form of an object or class with the id following an underscore. If no id is found, prefix with “new_” instead.</p>

<pre><code>dom_id(Post.find(45))       # =&gt; &quot;post_45&quot;
dom_id(Post.new)            # =&gt; &quot;new_post&quot;
</code></pre>

<p>If you need to address multiple instances of the same class in the same view, you can prefix the <a href="RecordIdentifier.html#method-i-dom_id"><code>dom_id</code></a>:</p>

<pre><code>dom_id(Post.find(45), :edit) # =&gt; &quot;edit_post_45&quot;
dom_id(Post.new, :custom)    # =&gt; &quot;custom_post&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-dom_id_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionview/lib/action_view/record_identifier.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dom_id</span>(<span class="ruby-identifier">record</span>, <span class="ruby-identifier">prefix</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">record_id</span> = <span class="ruby-identifier">record_key_for_dom_id</span>(<span class="ruby-identifier">record</span>)
    <span class="ruby-node">&quot;#{dom_class(record, prefix)}#{JOIN}#{record_id}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">dom_class</span>(<span class="ruby-identifier">record</span>, <span class="ruby-identifier">prefix</span> <span class="ruby-operator">||</span> <span class="ruby-constant">NEW</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
      <h2 id="instance-private-methods">Instance Private methods</h2>
      
        <div class="method">
          <h3 id="method-i-record_key_for_dom_id">
            
              record_key_for_dom_id(record)
            
          </h3>

          
            <div class="description">
              <p>Returns a string representation of the key attribute(s) that is suitable for use in an HTML DOM id. This can be overwritten to customize the default generated string representation if desired. If you need to read back a key from a <a href="RecordIdentifier.html#method-i-dom_id"><code>dom_id</code></a> in order to query for the underlying database record, you should write a helper like &#39;person_record_from_dom_id&#39; that will extract the key either based on the default implementation (which just joins all key attributes with &#39;_&#39;) or on your own overwritten version of the method. By default, this implementation passes the key string through a method that replaces all characters that are invalid inside DOM ids, with valid ones. You need to make sure yourself that your dom ids are valid, in case you overwrite this method.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-record_key_for_dom_id_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionview/lib/action_view/record_identifier.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">record_key_for_dom_id</span>(<span class="ruby-identifier">record</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-identifier">key</span> = <span class="ruby-identifier">convert_to_model</span>(<span class="ruby-identifier">record</span>).<span class="ruby-identifier">to_key</span>
  <span class="ruby-identifier">key</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">JOIN</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">key</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>

        <footer class="site-footer">
          <!-- <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span> -->
        </footer>
      </main>
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.0/anchor.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
  <script src="/assets/js/app.js"></script>
  <script src="/assets/js/search.js"></script>
</body>
</html>
