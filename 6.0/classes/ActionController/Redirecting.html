<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <link href="/assets/css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css">
  <link rel="apple-touch-icon" href="icon.png">
  <meta name="theme-color" content="#fafafa">
  <link href="https://fonts.googleapis.com/css?family=Asap" rel="stylesheet">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ActionController::Redirecting | RailsDoc(β)</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="ActionController::Redirecting" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ruby on Rails API Documentation." />
<meta property="og:description" content="Ruby on Rails API Documentation." />
<link rel="canonical" href="https://railsdoc.github.io/6.0/classes/ActionController/Redirecting.html" />
<meta property="og:url" content="https://railsdoc.github.io/6.0/classes/ActionController/Redirecting.html" />
<meta property="og:site_name" content="RailsDoc(β)" />
<meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="twitter:title" content="ActionController::Redirecting" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Ruby on Rails API Documentation.","headline":"ActionController::Redirecting","image":"https://avatars.githubusercontent.com/u/4223","url":"https://railsdoc.github.io/6.0/classes/ActionController/Redirecting.html"}</script>
<!-- End Jekyll SEO tag -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134470810-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-134470810-1');

    window.config = {
      rootPath: "/6.0/"
    }
  </script>
</head>
<body>
  <header class="navbar navbar-dark navbar-expand bg-dark flex-md-nowrap p-0 shadow sticky-header">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="/">RailsDoc(β)</a>
    <form class="w-100 d-none d-md-flex" action="/search" method="get">
      <input id="search-form" class="form-control form-control-dark" type="text" placeholder="Search" aria-label="Search" name="q">
    </form>

    <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex px-1">
      <li class="nav-item text-nowrap p-1">
        <div class="dropdown">
          <a class="dropdown-toggle nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            v6.0
          </a>
          <div class="dropdown-menu dropdown-menu-md-right" aria-labelledby="dropdownMenuLink">
            
    
    
    
        <a class="dropdown-item" href="/">v7.1</a>
    

    
    
    
        <a class="dropdown-item" href="/7.0/">v7.0</a>
    

    
    
    
        <a class="dropdown-item" href="/6.1/">v6.1</a>
    

    
    
    
        <a class="dropdown-item" href="/6.0/">v6.0</a>
    

    
    
    
        <a class="dropdown-item" href="/5.2/">v5.2</a>
    


          </div>
        </div>
      </li>
      <li class="nav-item text-nowrap p-1">
        <a class="nav-link p-2" href="https://github.com/railsdoc/railsdoc.github.io">GitHub</a>
      </li>
    </ul>
  </header>

  <div class="container-fluid">
    <div class="row">
      <nav class="col-12 col-md-3 col-xl-2 d-none d-md-block bg-light sidebar-sticky">
        <div id="navigation" class="sidebar-content">
        </div>
      </nav>

      <div class="col-12 col-md-3 col-xl-2 toc-content-sticky">
        <div class="toc-content"><ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#methods">Methods</a></li>
<li class="toc-entry toc-h2"><a href="#included-modules">Included Modules</a></li>
<li class="toc-entry toc-h2"><a href="#instance-public-methods">Instance Public methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-i-redirect_back">
            
              redirect_back(fallback_location:, allow_other_host: true, **args)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-redirect_to">
            
              redirect_to(options = {}, response_options = {})
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-redirect_to-label-Examples-3A">Examples:</a></li>
</ul>
</li>
</ul></div>
      </div>

      <main role="main" class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-4">
        <div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 6.0.6</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActionController::Redirecting
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/actionpack/lib/action_controller/metal/redirecting_rb.html">actionpack/lib/action_controller/metal/redirecting.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-redirect_back">redirect_back</a>
        </li>
      
        <li>
          <a href="#method-i-redirect_to">redirect_to</a>
        </li>
      
    </ul>
  

  
    <!-- Includes -->
    <h2 id="included-modules">Included Modules</h2>
    <ul>
      
        <li>
          
            <a href="UrlFor.html">
              ActionController::UrlFor
            </a>
          
        </li>
      
    </ul>
  

  
    

    

    

    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-redirect_back">
            
              redirect_back(fallback_location:, allow_other_host: true, **args)
            
          </h3>

          
            <div class="description">
              <p>Redirects the browser to the page that issued the request (the referrer) if possible, otherwise redirects to the provided default fallback location.</p>

<p>The referrer information is pulled from the HTTP <code>Referer</code> (sic) header on the request. This is an optional header and its presence on the request is subject to browser security settings and user preferences. If the request is missing this header, the <code>fallback_location</code> will be used.</p>

<pre><code>redirect_back fallback_location: { action: &quot;show&quot;, id: 5 }
redirect_back fallback_location: @post
redirect_back fallback_location: &quot;http://www.rubyonrails.org&quot;
redirect_back fallback_location: &quot;/images/screenshot.jpg&quot;
redirect_back fallback_location: posts_url
redirect_back fallback_location: proc { edit_post_url(@post) }
redirect_back fallback_location: &#39;/&#39;, allow_other_host: false
</code></pre>

<h4 id="method-i-redirect_back-label-Options">Options</h4>
<ul><li>
<p><code>:fallback_location</code> - The default fallback location that will be used on missing <code>Referer</code> header.</p>
</li><li>
<p><code>:allow_other_host</code> - Allow or disallow redirection to the host that is different to the current host, defaults to true.</p>
</li></ul>

<p>All other options that can be passed to <code>redirect_to</code> are accepted as options and the behavior is identical.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-redirect_back_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/metal/redirecting.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">redirect_back</span>(<span class="ruby-value">fallback_location:</span>, <span class="ruby-value">allow_other_host:</span> <span class="ruby-keyword">true</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">referer</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Referer&quot;</span>]
  <span class="ruby-identifier">redirect_to_referer</span> = <span class="ruby-identifier">referer</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">allow_other_host</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">_url_host_allowed?</span>(<span class="ruby-identifier">referer</span>))
  <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">redirect_to_referer</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">referer</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">fallback_location</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-redirect_to">
            
              redirect_to(options = {}, response_options = {})
            
          </h3>

          
            <div class="description">
              <p>Redirects the browser to the target specified in <code>options</code>. This parameter can be any one of:</p>
<ul><li>
<p><code>Hash</code> - The URL will be generated by calling url_for with the <code>options</code>.</p>
</li><li>
<p><code>Record</code> - The URL will be generated by calling url_for with the <code>options</code>, which will reference a named URL for that record.</p>
</li><li>
<p><code>String</code> starting with <code>protocol://</code> (like <code>http://</code>) or a protocol relative reference (like <code>//</code>) - Is passed straight through as the target for redirection.</p>
</li><li>
<p><code>String</code> not containing a protocol - The current protocol and host is prepended to the string.</p>
</li><li>
<p><code>Proc</code> - A block that will be executed in the controller&#39;s context. Should return any option accepted by <code>redirect_to</code>.</p>
</li></ul>

<h3 id="method-i-redirect_to-label-Examples-3A">Examples:</h3>

<pre><code>redirect_to action: &quot;show&quot;, id: 5
redirect_to @post
redirect_to &quot;http://www.rubyonrails.org&quot;
redirect_to &quot;/images/screenshot.jpg&quot;
redirect_to posts_url
redirect_to proc { edit_post_url(@post) }
</code></pre>

<p>The redirection happens as a <code>302 Found</code> header unless otherwise specified using the <code>:status</code> option:</p>

<pre><code>redirect_to post_url(@post), status: :found
redirect_to action: &#39;atom&#39;, status: :moved_permanently
redirect_to post_url(@post), status: 301
redirect_to action: &#39;atom&#39;, status: 302
</code></pre>

<p>The status code can either be a standard <a href="https://www.iana.org/assignments/http-status-codes">HTTP Status code</a> as an integer, or a symbol representing the downcased, underscored and symbolized description. Note that the status code must be a 3xx HTTP code, or redirection will not occur.</p>

<p>If you are using XHR requests other than GET or POST and redirecting after the request then some browsers will follow the redirect using the original request method. This may lead to undesirable behavior such as a double DELETE. To work around this you can return a <code>303 See Other</code> status code which will be followed using a GET request.</p>

<pre><code>redirect_to posts_url, status: :see_other
redirect_to action: &#39;index&#39;, status: 303
</code></pre>

<p>It is also possible to assign a flash message as part of the redirection. There are two special accessors for the commonly used flash names <code>alert</code> and <code>notice</code> as well as a general purpose <code>flash</code> bucket.</p>

<pre><code>redirect_to post_url(@post), alert: &quot;Watch it, mister!&quot;
redirect_to post_url(@post), status: :found, notice: &quot;Pay attention to the road&quot;
redirect_to post_url(@post), status: 301, flash: { updated_post_id: @post.id }
redirect_to({ action: &#39;atom&#39; }, alert: &quot;Something serious happened&quot;)
</code></pre>

<p>Statements after <code>redirect_to</code> in our controller get executed, so <code>redirect_to</code> doesn&#39;t stop the execution of the function. To terminate the execution of the function immediately after the <code>redirect_to</code>, use return.</p>

<pre><code>redirect_to post_url(@post) and return
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-redirect_to_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/metal/redirecting.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">redirect_to</span>(<span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">response_options</span> = {})
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActionControllerError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Cannot redirect to nil!&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">AbstractController</span><span class="ruby-operator">::</span><span class="ruby-constant">DoubleRenderError</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">response_body</span>

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">status</span>        = <span class="ruby-identifier">_extract_redirect_to_status</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">response_options</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">location</span>      = <span class="ruby-identifier">_compute_redirect_to_location</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">response_body</span> = <span class="ruby-node">&quot;&lt;html&gt;&lt;body&gt;You are being &lt;a href=\&quot;#{ERB::Util.unwrapped_html_escape(response.location)}\&quot;&gt;redirected&lt;/a&gt;.&lt;/body&gt;&lt;/html&gt;&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>

        <footer class="site-footer">
          <!-- <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span> -->
        </footer>
      </main>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.1/anchor.min.js" integrity="sha512-zPB79j2C+3sFS9zcA3vg/z6bVKzJVEyu9pY5w89akQRys76zpAT2t6S3wZKla3QQ14O5l/Yt0RUQ/DHXx82Y5g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="/assets/js/app.js"></script>
  <script src="/assets/js/search.js"></script>
</body>
</html>
