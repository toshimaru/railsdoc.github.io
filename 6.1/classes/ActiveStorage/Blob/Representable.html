<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <link href="/assets/css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/monokai.min.css">
  <link rel="apple-touch-icon" href="icon.png">
  <meta name="theme-color" content="#fafafa">
  <link href="https://fonts.googleapis.com/css?family=Asap" rel="stylesheet">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ActiveStorage::Blob::Representable | RailsDoc(β)</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="ActiveStorage::Blob::Representable" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ruby on Rails API Documentation." />
<meta property="og:description" content="Ruby on Rails API Documentation." />
<link rel="canonical" href="https://railsdoc.github.io/6.1/classes/ActiveStorage/Blob/Representable.html" />
<meta property="og:url" content="https://railsdoc.github.io/6.1/classes/ActiveStorage/Blob/Representable.html" />
<meta property="og:site_name" content="RailsDoc(β)" />
<meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="twitter:title" content="ActiveStorage::Blob::Representable" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Ruby on Rails API Documentation.","headline":"ActiveStorage::Blob::Representable","image":"https://avatars.githubusercontent.com/u/4223","url":"https://railsdoc.github.io/6.1/classes/ActiveStorage/Blob/Representable.html"}</script>
<!-- End Jekyll SEO tag -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134470810-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-134470810-1');

    window.config = {
      rootPath: "/6.1/"
    }
  </script>
</head>
<body>
  <header class="navbar navbar-dark navbar-expand bg-dark flex-md-nowrap p-0 shadow sticky-header">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="/">RailsDoc(β)</a>
    <form class="w-100 d-none d-md-flex" action="/search" method="get">
      <input id="search-form" class="form-control form-control-dark" type="text" placeholder="Search" aria-label="Search" name="q">
    </form>

    <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex px-1">
      <li class="nav-item text-nowrap p-1">
        <div class="dropdown">
          <a class="dropdown-toggle nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            v6.1
          </a>
          <div class="dropdown-menu dropdown-menu-md-right" aria-labelledby="dropdownMenuLink">
            <a class="dropdown-item" href="/">v7.0</a>
            
              
              <a class="dropdown-item" href="/6.1/">v6.1</a>
            
              
              <a class="dropdown-item" href="/6.0/">v6.0</a>
            
              
              <a class="dropdown-item" href="/5.2/">v5.2</a>
            
          </div>
        </div>
      </li>
      <li class="nav-item text-nowrap p-1">
        <a class="nav-link p-2" href="https://github.com/railsdoc/railsdoc.github.io">GitHub</a>
      </li>
    </ul>
  </header>

  <div class="container-fluid">
    <div class="row">
      <nav class="col-12 col-md-3 col-xl-2 d-none d-md-block bg-light sidebar-sticky">
        <div id="navigation" class="sidebar-content">
        </div>
      </nav>

      <div class="col-12 col-md-3 col-xl-2 toc-content-sticky">
        <div class="toc-content"><ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#methods">Methods</a></li>
<li class="toc-entry toc-h2"><a href="#instance-public-methods">Instance Public methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-i-preview">
            
              preview(transformations)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-previewable-3F">
            
              previewable?()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-representable-3F">
            
              representable?()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-representation">
            
              representation(transformations)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-variable-3F">
            
              variable?()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-variant">
            
              variant(transformations)
            
          </a></li>
</ul>
</li>
</ul></div>
      </div>

      <main role="main" class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-4">
        <div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 6.1.7</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActiveStorage::Blob::Representable
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/activestorage/app/models/active_storage/blob/representable_rb.html">activestorage/app/models/active_storage/blob/representable.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-preview">preview</a>
        </li>
      
        <li>
          <a href="#method-i-previewable-3F">previewable?</a>
        </li>
      
        <li>
          <a href="#method-i-representable-3F">representable?</a>
        </li>
      
        <li>
          <a href="#method-i-representation">representation</a>
        </li>
      
        <li>
          <a href="#method-i-variable-3F">variable?</a>
        </li>
      
        <li>
          <a href="#method-i-variant">variant</a>
        </li>
      
    </ul>
  

  

  
    

    

    

    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-preview">
            
              preview(transformations)
            
          </h3>

          
            <div class="description">
              <p>Returns an <a href="../Preview.html"><code>ActiveStorage::Preview</code></a> instance with the set of <code>transformations</code> provided. A preview is an image generated from a non-image blob. Active Storage comes with built-in previewers for videos and PDF documents. The video previewer extracts the first frame from a video and the PDF previewer extracts the first page from a PDF document.</p>

<pre><code>blob.preview(resize_to_limit: [100, 100]).processed.url
</code></pre>

<p>Avoid processing previews synchronously in views. Instead, link to a controller action that processes them on demand. Active Storage provides one, but you may want to create your own (for example, if you need authentication). Here’s how to use the built-in version:</p>

<pre><code>&lt;%= image_tag video.preview(resize_to_limit: [100, 100]) %&gt;
</code></pre>

<p>This method raises <a href="../UnpreviewableError.html"><code>ActiveStorage::UnpreviewableError</code></a> if no previewer accepts the receiving blob. To determine whether a blob is accepted by any previewer, call <a href="Representable.html#method-i-previewable-3F"><code>ActiveStorage::Blob#previewable?</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-preview_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activestorage/app/models/active_storage/blob/representable.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">preview</span>(<span class="ruby-identifier">transformations</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">previewable?</span>
    <span class="ruby-constant">ActiveStorage</span><span class="ruby-operator">::</span><span class="ruby-constant">Preview</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">transformations</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveStorage</span><span class="ruby-operator">::</span><span class="ruby-constant">UnpreviewableError</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-previewable-3F">
            
              previewable?()
            
          </h3>

          
            <div class="description">
              <p>Returns true if any registered previewer accepts the blob. By default, this will return true for videos and PDF documents.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-previewable-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activestorage/app/models/active_storage/blob/representable.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">previewable?</span>
  <span class="ruby-constant">ActiveStorage</span>.<span class="ruby-identifier">previewers</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">accept?</span>(<span class="ruby-keyword">self</span>) }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-representable-3F">
            
              representable?()
            
          </h3>

          
            <div class="description">
              <p>Returns true if the blob is variable or previewable.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-representable-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activestorage/app/models/active_storage/blob/representable.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">representable?</span>
  <span class="ruby-identifier">variable?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">previewable?</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-representation">
            
              representation(transformations)
            
          </h3>

          
            <div class="description">
              <p>Returns an <a href="../Preview.html"><code>ActiveStorage::Preview</code></a> for a previewable blob or an <a href="../Variant.html"><code>ActiveStorage::Variant</code></a> for a variable image blob.</p>

<pre><code>blob.representation(resize_to_limit: [100, 100]).processed.url
</code></pre>

<p>Raises <a href="../UnrepresentableError.html"><code>ActiveStorage::UnrepresentableError</code></a> if the receiving blob is neither variable nor previewable. Call <a href="Representable.html#method-i-representable-3F"><code>ActiveStorage::Blob#representable?</code></a> to determine whether a blob is representable.</p>

<p>See <a href="Representable.html#method-i-preview"><code>ActiveStorage::Blob#preview</code></a> and <a href="Representable.html#method-i-variant"><code>ActiveStorage::Blob#variant</code></a> for more information.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-representation_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activestorage/app/models/active_storage/blob/representable.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">representation</span>(<span class="ruby-identifier">transformations</span>)
  <span class="ruby-keyword">case</span>
  <span class="ruby-keyword">when</span> <span class="ruby-identifier">previewable?</span>
    <span class="ruby-identifier">preview</span> <span class="ruby-identifier">transformations</span>
  <span class="ruby-keyword">when</span> <span class="ruby-identifier">variable?</span>
    <span class="ruby-identifier">variant</span> <span class="ruby-identifier">transformations</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveStorage</span><span class="ruby-operator">::</span><span class="ruby-constant">UnrepresentableError</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-variable-3F">
            
              variable?()
            
          </h3>

          
            <div class="description">
              <p>Returns true if ImageMagick can transform the blob (its content type is in <code>ActiveStorage.variable_content_types</code>).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-variable-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activestorage/app/models/active_storage/blob/representable.rb, line 42</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">variable?</span>
  <span class="ruby-constant">ActiveStorage</span>.<span class="ruby-identifier">variable_content_types</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">content_type</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-variant">
            
              variant(transformations)
            
          </h3>

          
            <div class="description">
              <p>Returns an <a href="../Variant.html"><code>ActiveStorage::Variant</code></a> instance with the set of <code>transformations</code> provided. This is only relevant for image files, and it allows any image to be transformed for size, colors, and the like. Example:</p>

<pre><code>avatar.variant(resize_to_limit: [100, 100]).processed.url
</code></pre>

<p>This will create and process a variant of the avatar blob that&#39;s constrained to a height and width of 100px. Then it&#39;ll upload said variant to the service according to a derivative key of the blob and the transformations.</p>

<p>Frequently, though, you don&#39;t actually want to transform the variant right away. But rather simply refer to a specific variant that can be created by a controller on-demand. Like so:</p>

<pre><code>&lt;%= image_tag Current.user.avatar.variant(resize_to_limit: [100, 100]) %&gt;
</code></pre>

<p>This will create a URL for that specific blob with that specific variant, which the ActiveStorage::RepresentationsController can then produce on-demand.</p>

<p>Raises <a href="../InvariableError.html"><code>ActiveStorage::InvariableError</code></a> if ImageMagick cannot transform the blob. To determine whether a blob is variable, call <a href="Representable.html#method-i-variable-3F"><code>ActiveStorage::Blob#variable?</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-variant_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activestorage/app/models/active_storage/blob/representable.rb, line 33</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">variant</span>(<span class="ruby-identifier">transformations</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">variable?</span>
    <span class="ruby-identifier">variant_class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-constant">ActiveStorage</span><span class="ruby-operator">::</span><span class="ruby-constant">Variation</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">transformations</span>).<span class="ruby-identifier">default_to</span>(<span class="ruby-identifier">default_variant_transformations</span>))
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveStorage</span><span class="ruby-operator">::</span><span class="ruby-constant">InvariableError</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>

        <footer class="site-footer">
          <!-- <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span> -->
        </footer>
      </main>
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.0/anchor.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
  <script src="/assets/js/app.js"></script>
  <script src="/assets/js/search.js"></script>
</body>
</html>
