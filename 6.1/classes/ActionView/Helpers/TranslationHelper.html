<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <link href="/assets/css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/monokai.min.css">
  <link rel="apple-touch-icon" href="icon.png">
  <meta name="theme-color" content="#fafafa">
  <link href="https://fonts.googleapis.com/css?family=Asap" rel="stylesheet">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ActionView::Helpers::TranslationHelper | RailsDoc(β)</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="ActionView::Helpers::TranslationHelper" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ruby on Rails API Documentation." />
<meta property="og:description" content="Ruby on Rails API Documentation." />
<link rel="canonical" href="https://railsdoc.github.io/6.1/classes/ActionView/Helpers/TranslationHelper.html" />
<meta property="og:url" content="https://railsdoc.github.io/6.1/classes/ActionView/Helpers/TranslationHelper.html" />
<meta property="og:site_name" content="RailsDoc(β)" />
<meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="twitter:title" content="ActionView::Helpers::TranslationHelper" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Ruby on Rails API Documentation.","headline":"ActionView::Helpers::TranslationHelper","image":"https://avatars.githubusercontent.com/u/4223","url":"https://railsdoc.github.io/6.1/classes/ActionView/Helpers/TranslationHelper.html"}</script>
<!-- End Jekyll SEO tag -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134470810-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-134470810-1');

    window.config = {
      rootPath: "/6.1/"
    }
  </script>
</head>
<body>
  <header class="navbar navbar-dark navbar-expand bg-dark flex-md-nowrap p-0 shadow sticky-header">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="/">RailsDoc(β)</a>
    <form class="w-100 d-none d-md-flex" action="/search" method="get">
      <input id="search-form" class="form-control form-control-dark" type="text" placeholder="Search" aria-label="Search" name="q">
    </form>

    <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex px-1">
      <li class="nav-item text-nowrap p-1">
        <div class="dropdown">
          <a class="dropdown-toggle nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            v6.1
          </a>
          <div class="dropdown-menu dropdown-menu-md-right" aria-labelledby="dropdownMenuLink">
            <a class="dropdown-item" href="/">v7.0</a>
            
              
              <a class="dropdown-item" href="/6.1/">v6.1</a>
            
              
              <a class="dropdown-item" href="/6.0/">v6.0</a>
            
              
              <a class="dropdown-item" href="/5.2/">v5.2</a>
            
          </div>
        </div>
      </li>
      <li class="nav-item text-nowrap p-1">
        <a class="nav-link p-2" href="https://github.com/railsdoc/railsdoc.github.io">GitHub</a>
      </li>
    </ul>
  </header>

  <div class="container-fluid">
    <div class="row">
      <nav class="col-12 col-md-3 col-xl-2 d-none d-md-block bg-light sidebar-sticky">
        <div id="navigation" class="sidebar-content">
        </div>
      </nav>

      <div class="col-12 col-md-3 col-xl-2 toc-content-sticky">
        <div class="toc-content"><ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#methods">Methods</a></li>
<li class="toc-entry toc-h2"><a href="#included-modules">Included Modules</a></li>
<li class="toc-entry toc-h2"><a href="#instance-public-methods">Instance Public methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-i-l">
            
              l(object, **options)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-localize">
            
              localize(object, **options)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-t">
            
              t(key, **options)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-translate">
            
              translate(key, **options)
            
          </a></li>
</ul>
</li>
</ul></div>
      </div>

      <main role="main" class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-4">
        <div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 6.1.7</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActionView::Helpers::TranslationHelper
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/actionview/lib/action_view/helpers/translation_helper_rb.html">actionview/lib/action_view/helpers/translation_helper.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-l">l</a>
        </li>
      
        <li>
          <a href="#method-i-localize">localize</a>
        </li>
      
        <li>
          <a href="#method-i-t">t</a>
        </li>
      
        <li>
          <a href="#method-i-translate">translate</a>
        </li>
      
    </ul>
  

  
    <!-- Includes -->
    <h2 id="included-modules">Included Modules</h2>
    <ul>
      
        <li>
          
            <a href="TagHelper.html">
              ActionView::Helpers::TagHelper
            </a>
          
        </li>
      
    </ul>
  

  
    

    

    

    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-l">
            
              l(object, **options)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="TranslationHelper.html#method-i-localize">localize</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-localize">
            
              localize(object, **options)
            
          </h3>

          
            <div class="description">
              <p>Delegates to <code>I18n.localize</code> with no additional functionality.</p>

<p>See <a href="https://www.rubydoc.info/github/svenfuchs/i18n/master/I18n/Backend/Base:localize">www.rubydoc.info/github/svenfuchs/i18n/master/I18n/Backend/Base:localize</a> for more information.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="TranslationHelper.html#method-i-l">l</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-localize_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionview/lib/action_view/helpers/translation_helper.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">localize</span>(<span class="ruby-identifier">object</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">localize</span>(<span class="ruby-identifier">object</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-t">
            
              t(key, **options)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="TranslationHelper.html#method-i-translate">translate</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-translate">
            
              translate(key, **options)
            
          </h3>

          
            <div class="description">
              <p>Delegates to <code>I18n#translate</code> but also performs three additional functions.</p>

<p>First, it will ensure that any thrown <code>MissingTranslation</code> messages will be rendered as inline spans that:</p>
<ul><li>
<p>Have a <code>translation-missing</code> class applied</p>
</li><li>
<p>Contain the missing key as the value of the <code>title</code> attribute</p>
</li><li>
<p>Have a titleized version of the last key segment as text</p>
</li></ul>

<p>For example, the value returned for the missing translation key <code>&quot;blog.post.title&quot;</code> will be:</p>

<pre><code>&lt;span
  class=&quot;translation_missing&quot;
  title=&quot;translation missing: en.blog.post.title&quot;&gt;Title&lt;/span&gt;
</code></pre>

<p>This allows for views to display rather reasonable strings while still giving developers a way to find missing translations.</p>

<p>If you would prefer missing translations to raise an error, you can opt out of span-wrapping behavior globally by setting <code>ActionView::Base.raise_on_missing_translations = true</code> or individually by passing <code>raise: true</code> as an option to <code>translate</code>.</p>

<p>Second, if the key starts with a period <code>translate</code> will scope the key by the current partial. Calling <code>translate(&quot;.foo&quot;)</code> from the <code>people/index.html.erb</code> template is equivalent to calling <code>translate(&quot;people.index.foo&quot;)</code>. This makes it less repetitive to translate many keys within the same partial and provides a convention to scope keys consistently.</p>

<p>Third, the translation will be marked as <code>html_safe</code> if the key has the suffix “_html” or the last element of the key is “html”. Calling <code>translate(&quot;footer_html&quot;)</code> or <code>translate(&quot;footer.html&quot;)</code> will return an HTML safe string that won&#39;t be escaped by other HTML helper methods. This naming convention helps to identify translations that include HTML tags so that you know what kind of output to expect when you call translate in a template and translators know which keys they can provide HTML values for.</p>

<p>To access the translated text along with the fully resolved translation key, <code>translate</code> accepts a block:</p>

<pre><code>&lt;%= translate(&quot;.relative_key&quot;) do |translation, resolved_key| %&gt;
  &lt;span title=&quot;&lt;%= resolved_key %&gt;&quot;&gt;&lt;%= translation %&gt;&lt;/span&gt;
&lt;% end %&gt;
</code></pre>

<p>This enables annotate translated text to be aware of the scope it was resolved against.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="TranslationHelper.html#method-i-t">t</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-translate_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionview/lib/action_view/helpers/translation_helper.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">translate</span>(<span class="ruby-identifier">key</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">translate</span>(<span class="ruby-identifier">k</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>) } <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
  <span class="ruby-identifier">key</span> = <span class="ruby-identifier">key</span>&amp;.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)

  <span class="ruby-identifier">alternatives</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:default</span>)
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:default</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:default</span>).<span class="ruby-identifier">compact</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:default</span>)]
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">options</span>[<span class="ruby-value">:raise</span>] = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:raise</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">raise_on_missing_translations</span>
  <span class="ruby-identifier">default</span> = <span class="ruby-constant">MISSING_TRANSLATION</span>

  <span class="ruby-identifier">translation</span> = <span class="ruby-keyword">while</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">alternatives</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">alternatives</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:raise</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">default</span> = <span class="ruby-constant">NO_DEFAULT</span> <span class="ruby-comment"># let I18n handle missing translation</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">key</span> = <span class="ruby-identifier">scope_key_by_partial</span>(<span class="ruby-identifier">key</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">html_safe_translation_key?</span>(<span class="ruby-identifier">key</span>)
      <span class="ruby-identifier">html_safe_options</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">html_escape_translation_options</span>(<span class="ruby-identifier">options</span>)
      <span class="ruby-identifier">translated</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">translate</span>(<span class="ruby-identifier">key</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">html_safe_options</span>, <span class="ruby-value">default:</span> <span class="ruby-identifier">default</span>)
      <span class="ruby-keyword">break</span> <span class="ruby-identifier">html_safe_translation</span>(<span class="ruby-identifier">translated</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">translated</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-constant">MISSING_TRANSLATION</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">translated</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">translate</span>(<span class="ruby-identifier">key</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>, <span class="ruby-value">default:</span> <span class="ruby-identifier">default</span>)
      <span class="ruby-keyword">break</span> <span class="ruby-identifier">translated</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">translated</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-constant">MISSING_TRANSLATION</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">alternatives</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">alternatives</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
      <span class="ruby-keyword">break</span> <span class="ruby-identifier">alternatives</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">translate</span>(<span class="ruby-operator">**</span><span class="ruby-identifier">options</span>, <span class="ruby-value">default:</span> <span class="ruby-identifier">alternatives</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">first_key</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">key</span>
    <span class="ruby-identifier">key</span> = <span class="ruby-identifier">alternatives</span>&amp;.<span class="ruby-identifier">shift</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">first_key</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">translation</span> = <span class="ruby-identifier">missing_translation</span>(<span class="ruby-identifier">first_key</span>, <span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">key</span> = <span class="ruby-identifier">first_key</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">block_given?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">translation</span>, <span class="ruby-identifier">key</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">translation</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>

        <footer class="site-footer">
          <!-- <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span> -->
        </footer>
      </main>
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.0/anchor.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
  <script src="/assets/js/app.js"></script>
  <script src="/assets/js/search.js"></script>
</body>
</html>
