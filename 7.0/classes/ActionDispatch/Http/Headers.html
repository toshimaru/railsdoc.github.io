<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <link href="/assets/css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css">
  <link rel="apple-touch-icon" href="icon.png">
  <meta name="theme-color" content="#fafafa">
  <link href="https://fonts.googleapis.com/css?family=Asap" rel="stylesheet">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ActionDispatch::Http::Headers | RailsDoc(β)</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="ActionDispatch::Http::Headers" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ruby on Rails API Documentation." />
<meta property="og:description" content="Ruby on Rails API Documentation." />
<link rel="canonical" href="https://railsdoc.github.io/7.0/classes/ActionDispatch/Http/Headers.html" />
<meta property="og:url" content="https://railsdoc.github.io/7.0/classes/ActionDispatch/Http/Headers.html" />
<meta property="og:site_name" content="RailsDoc(β)" />
<meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="twitter:title" content="ActionDispatch::Http::Headers" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Ruby on Rails API Documentation.","headline":"ActionDispatch::Http::Headers","image":"https://avatars.githubusercontent.com/u/4223","url":"https://railsdoc.github.io/7.0/classes/ActionDispatch/Http/Headers.html"}</script>
<!-- End Jekyll SEO tag -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134470810-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-134470810-1');

    window.config = {
      rootPath: "/7.0/"
    }
  </script>
</head>
<body>
  <header class="navbar navbar-dark navbar-expand bg-dark flex-md-nowrap p-0 shadow sticky-header">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="/">RailsDoc(β)</a>
    <form class="w-100 d-none d-md-flex" action="/search" method="get">
      <input id="search-form" class="form-control form-control-dark" type="text" placeholder="Search" aria-label="Search" name="q">
    </form>

    <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex px-1">
      <li class="nav-item text-nowrap p-1">
        <div class="dropdown">
          <a class="dropdown-toggle nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            v7.0
          </a>
          <div class="dropdown-menu dropdown-menu-md-right" aria-labelledby="dropdownMenuLink">
            
    
    
    
        <a class="dropdown-item" href="/">v7.1</a>
    

    
    
    
        <a class="dropdown-item" href="/7.0/">v7.0</a>
    

    
    
    
        <a class="dropdown-item" href="/6.1/">v6.1</a>
    

    
    
    
        <a class="dropdown-item" href="/6.0/">v6.0</a>
    

    
    
    
        <a class="dropdown-item" href="/5.2/">v5.2</a>
    


          </div>
        </div>
      </li>
      <li class="nav-item text-nowrap p-1">
        <a class="nav-link p-2" href="https://github.com/railsdoc/railsdoc.github.io">GitHub</a>
      </li>
    </ul>
  </header>

  <div class="container-fluid">
    <div class="row">
      <nav class="col-12 col-md-3 col-xl-2 d-none d-md-block bg-light sidebar-sticky">
        <div id="navigation" class="sidebar-content">
        </div>
      </nav>

      <div class="col-12 col-md-3 col-xl-2 toc-content-sticky">
        <div class="toc-content"><ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#methods">Methods</a></li>
<li class="toc-entry toc-h2"><a href="#included-modules">Included Modules</a></li>
<li class="toc-entry toc-h2"><a href="#constants">Constants</a></li>
<li class="toc-entry toc-h2"><a href="#class-public-methods">Class Public methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-c-from_hash">
            
              from_hash(hash)
            
          </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#instance-public-methods">Instance Public methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-i-5B-5D">
            
              [](key)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-5B-5D-3D">
            
              []=(key, value)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-add">
            
              add(key, value)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-each">
            
              each(&amp;block)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-env">
            
              env()
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-fetch">
            
              fetch(key, default = DEFAULT)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-include-3F">
            
              include?(key)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-key-3F">
            
              key?(key)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-merge">
            
              merge(headers_or_env)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-merge-21">
            
              merge!(headers_or_env)
            
          </a></li>
</ul>
</li>
</ul></div>
      </div>

      <main role="main" class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-4">
        <div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 7.0.8</span><br />
        
        <div class="type">Class</div>
        <h1>
            ActionDispatch::Http::Headers
            
                <span class="parent">&lt;
                    
                    <a href="../../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/actionpack/lib/action_dispatch/http/headers_rb.html">actionpack/lib/action_dispatch/http/headers.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Provides access to the request’s HTTP headers from the environment.</p>

<pre><code>env     = { &quot;CONTENT_TYPE&quot; =&gt; &quot;text/plain&quot;, &quot;HTTP_USER_AGENT&quot; =&gt; &quot;curl/7.43.0&quot; }
headers = ActionDispatch::Http::Headers.from_hash(env)
headers[&quot;Content-Type&quot;] # =&gt; &quot;text/plain&quot;
headers[&quot;User-Agent&quot;] # =&gt; &quot;curl/7.43.0&quot;
</code></pre>

<p>Also note that when headers are mapped to CGI-like variables by the Rack server, both dashes and underscores are converted to underscores. This ambiguity cannot be resolved at this stage anymore. Both underscores and dashes have to be interpreted as if they were originally sent as dashes.</p>

<pre><code># GET / HTTP/1.1
# ...
# User-Agent: curl/7.43.0
# X_Custom_Header: token

headers[&quot;X_Custom_Header&quot;] # =&gt; nil
headers[&quot;X-Custom-Header&quot;] # =&gt; &quot;token&quot;
</code></pre>

    </div>
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-5B-5D">[]</a>
        </li>
      
        <li>
          <a href="#method-i-5B-5D-3D">[]=</a>
        </li>
      
        <li>
          <a href="#method-i-add">add</a>
        </li>
      
        <li>
          <a href="#method-i-each">each</a>
        </li>
      
        <li>
          <a href="#method-i-env">env</a>
        </li>
      
        <li>
          <a href="#method-i-fetch">fetch</a>
        </li>
      
        <li>
          <a href="#method-c-from_hash">from_hash</a>
        </li>
      
        <li>
          <a href="#method-i-include-3F">include?</a>
        </li>
      
        <li>
          <a href="#method-i-key-3F">key?</a>
        </li>
      
        <li>
          <a href="#method-i-merge">merge</a>
        </li>
      
        <li>
          <a href="#method-i-merge-21">merge!</a>
        </li>
      
    </ul>
  

  
    <!-- Includes -->
    <h2 id="included-modules">Included Modules</h2>
    <ul>
      
        <li>
          
            <a href="../../Enumerable.html">
              Enumerable
            </a>
          
        </li>
      
    </ul>
  

  
    

    

    
      <!-- Section constants -->
      <h2 id="constants">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">CGI_VARIABLES</td>
            <td>=</td>
            <td class="attr-value">Set.new(%W[
AUTH_TYPE
CONTENT_LENGTH
CONTENT_TYPE
GATEWAY_INTERFACE
HTTPS
PATH_INFO
PATH_TRANSLATED
QUERY_STRING
REMOTE_ADDR
REMOTE_HOST
REMOTE_IDENT
REMOTE_USER
REQUEST_METHOD
SCRIPT_NAME
SERVER_NAME
SERVER_PORT
SERVER_PROTOCOL
SERVER_SOFTWARE
]).freeze</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">HTTP_HEADER</td>
            <td>=</td>
            <td class="attr-value">/\A[A-Za-z0-9-]+\z/</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    

    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-from_hash">
            
              from_hash(hash)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-from_hash_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">from_hash</span>(<span class="ruby-identifier">hash</span>)
  <span class="ruby-identifier">new</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">hash</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-5B-5D">
            
              [](key)
            
          </h3>

          
            <div class="description">
              <p>Returns the value for the given key mapped to @env.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-5B-5D_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 59</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">[]</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@req</span>.<span class="ruby-identifier">get_header</span> <span class="ruby-identifier">env_name</span>(<span class="ruby-identifier">key</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-5B-5D-3D">
            
              []=(key, value)
            
          </h3>

          
            <div class="description">
              <p>Sets the given value for the key mapped to @env.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-5B-5D-3D_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">[]=</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@req</span>.<span class="ruby-identifier">set_header</span> <span class="ruby-identifier">env_name</span>(<span class="ruby-identifier">key</span>), <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-add">
            
              add(key, value)
            
          </h3>

          
            <div class="description">
              <p>Add a value to a multivalued header like <code>Vary</code> or <code>Accept-Encoding</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-add_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@req</span>.<span class="ruby-identifier">add_header</span> <span class="ruby-identifier">env_name</span>(<span class="ruby-identifier">key</span>), <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-each">
            
              each(&amp;block)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-each_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@req</span>.<span class="ruby-identifier">each_header</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-env">
            
              env()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-env_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 116</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">env</span>; <span class="ruby-ivar">@req</span>.<span class="ruby-identifier">env</span>.<span class="ruby-identifier">dup</span>; <span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-fetch">
            
              fetch(key, default = DEFAULT)
            
          </h3>

          
            <div class="description">
              <p>Returns the value for the given key mapped to @env.</p>

<p>If the key is not found and an optional code block is not provided, raises a <code>KeyError</code> exception.</p>

<p>If the code block is provided, then it will be run and its result returned.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-fetch_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">fetch</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">default</span> = <span class="ruby-constant">DEFAULT</span>)
  <span class="ruby-ivar">@req</span>.<span class="ruby-identifier">fetch_header</span>(<span class="ruby-identifier">env_name</span>(<span class="ruby-identifier">key</span>)) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">default</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">default</span> <span class="ruby-operator">==</span> <span class="ruby-constant">DEFAULT</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">yield</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">KeyError</span>, <span class="ruby-identifier">key</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-include-3F">
            
              include?(key)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Headers.html#method-i-key-3F">key?</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-key-3F">
            
              key?(key)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Headers.html#method-i-include-3F">include?</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-key-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 73</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">key?</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@req</span>.<span class="ruby-identifier">has_header?</span> <span class="ruby-identifier">env_name</span>(<span class="ruby-identifier">key</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-merge">
            
              merge(headers_or_env)
            
          </h3>

          
            <div class="description">
              <p>Returns a new <a href="Headers.html"><code>Http::Headers</code></a> instance containing the contents of <code>headers_or_env</code> and the original instance.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-merge_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">merge</span>(<span class="ruby-identifier">headers_or_env</span>)
  <span class="ruby-identifier">headers</span> = <span class="ruby-ivar">@req</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">headers</span>
  <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">headers_or_env</span>)
  <span class="ruby-identifier">headers</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-merge-21">
            
              merge!(headers_or_env)
            
          </h3>

          
            <div class="description">
              <p>Adds the contents of <code>headers_or_env</code> to original instance entries; duplicate keys are overwritten with the values from <code>headers_or_env</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-merge-21_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_dispatch/http/headers.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">merge!</span>(<span class="ruby-identifier">headers_or_env</span>)
  <span class="ruby-identifier">headers_or_env</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@req</span>.<span class="ruby-identifier">set_header</span> <span class="ruby-identifier">env_name</span>(<span class="ruby-identifier">key</span>), <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>

        <footer class="site-footer">
          <!-- <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span> -->
        </footer>
      </main>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.1/anchor.min.js" integrity="sha512-zPB79j2C+3sFS9zcA3vg/z6bVKzJVEyu9pY5w89akQRys76zpAT2t6S3wZKla3QQ14O5l/Yt0RUQ/DHXx82Y5g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="/assets/js/app.js"></script>
  <script src="/assets/js/search.js"></script>
</body>
</html>
