<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <link href="/assets/css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css">
  <link rel="apple-touch-icon" href="icon.png">
  <meta name="theme-color" content="#fafafa">
  <link href="https://fonts.googleapis.com/css?family=Asap" rel="stylesheet">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ActionView::Helpers::CaptureHelper | RailsDoc(β)</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="ActionView::Helpers::CaptureHelper" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ruby on Rails API Documentation." />
<meta property="og:description" content="Ruby on Rails API Documentation." />
<link rel="canonical" href="https://railsdoc.github.io/7.0/classes/ActionView/Helpers/CaptureHelper.html" />
<meta property="og:url" content="https://railsdoc.github.io/7.0/classes/ActionView/Helpers/CaptureHelper.html" />
<meta property="og:site_name" content="RailsDoc(β)" />
<meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://avatars.githubusercontent.com/u/4223" />
<meta property="twitter:title" content="ActionView::Helpers::CaptureHelper" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Ruby on Rails API Documentation.","headline":"ActionView::Helpers::CaptureHelper","image":"https://avatars.githubusercontent.com/u/4223","url":"https://railsdoc.github.io/7.0/classes/ActionView/Helpers/CaptureHelper.html"}</script>
<!-- End Jekyll SEO tag -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134470810-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-134470810-1');

    window.config = {
      rootPath: "/7.0/"
    }
  </script>
</head>
<body>
  <header class="navbar navbar-dark navbar-expand bg-dark flex-md-nowrap p-0 shadow sticky-header">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="/">RailsDoc(β)</a>
    <form class="w-100 d-none d-md-flex" action="/search" method="get">
      <input id="search-form" class="form-control form-control-dark" type="text" placeholder="Search" aria-label="Search" name="q">
    </form>

    <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex px-1">
      <li class="nav-item text-nowrap p-1">
        <div class="dropdown">
          <a class="dropdown-toggle nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            v7.0
          </a>
          <div class="dropdown-menu dropdown-menu-md-right" aria-labelledby="dropdownMenuLink">
            
    
    
    
        <a class="dropdown-item" href="/">v7.1</a>
    

    
    
    
        <a class="dropdown-item" href="/7.0/">v7.0</a>
    

    
    
    
        <a class="dropdown-item" href="/6.1/">v6.1</a>
    

    
    
    
        <a class="dropdown-item" href="/6.0/">v6.0</a>
    

    
    
    
        <a class="dropdown-item" href="/5.2/">v5.2</a>
    


          </div>
        </div>
      </li>
      <li class="nav-item text-nowrap p-1">
        <a class="nav-link p-2" href="https://github.com/railsdoc/railsdoc.github.io">GitHub</a>
      </li>
    </ul>
  </header>

  <div class="container-fluid">
    <div class="row">
      <nav class="col-12 col-md-3 col-xl-2 d-none d-md-block bg-light sidebar-sticky">
        <div id="navigation" class="sidebar-content">
        </div>
      </nav>

      <div class="col-12 col-md-3 col-xl-2 toc-content-sticky">
        <div class="toc-content"><ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#methods">Methods</a></li>
<li class="toc-entry toc-h2"><a href="#instance-public-methods">Instance Public methods</a>
<ul>
<li class="toc-entry toc-h3"><a href="#method-i-capture">
            
              capture(*args)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-content_for">
            
              content_for(name, content = nil, options = {}, &amp;block)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-content_for-3F">
            
              content_for?(name)
            
          </a></li>
<li class="toc-entry toc-h3"><a href="#method-i-provide">
            
              provide(name, content = nil, &amp;block)
            
          </a></li>
</ul>
</li>
</ul></div>
      </div>

      <main role="main" class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-4">
        <div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 7.0.8</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActionView::Helpers::CaptureHelper
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/actionview/lib/action_view/helpers/capture_helper_rb.html">actionview/lib/action_view/helpers/capture_helper.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="CaptureHelper.html"><code>CaptureHelper</code></a> exposes methods to let you extract generated markup which can be used in other parts of a template or layout file.</p>

<p>It provides a method to capture blocks into variables through capture and a way to capture a block of markup for use in a layout through <a href="CaptureHelper.html#method-i-content_for">content_for</a>.</p>

    </div>
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-capture">capture</a>
        </li>
      
        <li>
          <a href="#method-i-content_for">content_for</a>
        </li>
      
        <li>
          <a href="#method-i-content_for-3F">content_for?</a>
        </li>
      
        <li>
          <a href="#method-i-provide">provide</a>
        </li>
      
    </ul>
  

  

  
    

    

    

    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-capture">
            
              capture(*args)
            
          </h3>

          
            <div class="description">
              <p>The capture method extracts part of a template as a <a href="../../String.html"><code>String</code></a> object. You can then use this object anywhere in your templates, layout, or helpers.</p>

<p>The capture method can be used in <a href="../../ERB.html"><code>ERB</code></a> templates…</p>

<pre><code>&lt;% @greeting = capture do %&gt;
  Welcome to my shiny new web page!  The date and time is
  &lt;%= Time.now %&gt;
&lt;% end %&gt;
</code></pre>

<p>…and Builder (RXML) templates.</p>

<pre><code>@timestamp = capture do
  &quot;The current timestamp is #{Time.now}.&quot;
end
</code></pre>

<p>You can then use that variable anywhere else. For example:</p>

<pre><code>&lt;html&gt;
&lt;head&gt;&lt;title&gt;&lt;%= @greeting %&gt;&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;b&gt;&lt;%= @greeting %&gt;&lt;/b&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The return of capture is the string generated by the block. For Example:</p>

<pre><code>@greeting # =&gt; &quot;Welcome to my shiny new web page! The date and time is 2018-09-06 11:09:16 -0500&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-capture_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionview/lib/action_view/helpers/capture_helper.rb, line 43</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">capture</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">buffer</span> = <span class="ruby-identifier">with_output_buffer</span> { <span class="ruby-identifier">value</span> = <span class="ruby-keyword">yield</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>) }
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">string</span> = <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">presence</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
    <span class="ruby-constant">ERB</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">html_escape</span> <span class="ruby-identifier">string</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-content_for">
            
              content_for(name, content = nil, options = {}, &amp;block)
            
          </h3>

          
            <div class="description">
              <p>Calling <code>content_for</code> stores a block of markup in an identifier for later use. In order to access this stored content in other templates, helper modules or the layout, you would pass the identifier as an argument to <code>content_for</code>.</p>

<p>Note: <code>yield</code> can still be used to retrieve the stored content, but calling <code>yield</code> doesn’t work in helper modules, while <code>content_for</code> does.</p>

<pre><code>&lt;% content_for :not_authorized do %&gt;
  alert(&#39;You are not authorized to do that!&#39;)
&lt;% end %&gt;
</code></pre>

<p>You can then use <code>content_for :not_authorized</code> anywhere in your templates.</p>

<pre><code>&lt;%= content_for :not_authorized if current_user.nil? %&gt;
</code></pre>

<p>This is equivalent to:</p>

<pre><code>&lt;%= yield :not_authorized if current_user.nil? %&gt;
</code></pre>

<p><code>content_for</code>, however, can also be used in helper modules.</p>

<pre><code>module StorageHelper
  def stored_content
    content_for(:storage) || &quot;Your storage is empty&quot;
  end
end
</code></pre>

<p>This helper works just like normal helpers.</p>

<pre><code>&lt;%= stored_content %&gt;
</code></pre>

<p>You can also use the <code>yield</code> syntax alongside an existing call to <code>yield</code> in a layout. For example:</p>

<pre><code>&lt;%# This is the layout %&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;title&gt;My Website&lt;/title&gt;
  &lt;%= yield :script %&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;%= yield %&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>And now, we’ll create a view that has a <code>content_for</code> call that creates the <code>script</code> identifier.</p>

<pre><code>&lt;%# This is our view %&gt;
Please login!

&lt;% content_for :script do %&gt;
  &lt;script&gt;alert(&#39;You are not authorized to view this page!&#39;)&lt;/script&gt;
&lt;% end %&gt;
</code></pre>

<p>Then, in another view, you could to do something like this:</p>

<pre><code>&lt;%= link_to &#39;Logout&#39;, action: &#39;logout&#39;, remote: true %&gt;

&lt;% content_for :script do %&gt;
  &lt;%= javascript_include_tag :defaults %&gt;
&lt;% end %&gt;
</code></pre>

<p>That will place <code>script</code> tags for your default set of JavaScript files on the page; this technique is useful if you’ll only be using these scripts in a few views.</p>

<p>Note that <code>content_for</code> concatenates (default) the blocks it is given for a particular identifier in order. For example:</p>

<pre><code>&lt;% content_for :navigation do %&gt;
  &lt;li&gt;&lt;%= link_to &#39;Home&#39;, action: &#39;index&#39; %&gt;&lt;/li&gt;
&lt;% end %&gt;
</code></pre>

<p>And in another place:</p>

<pre><code>&lt;% content_for :navigation do %&gt;
  &lt;li&gt;&lt;%= link_to &#39;Login&#39;, action: &#39;login&#39; %&gt;&lt;/li&gt;
&lt;% end %&gt;
</code></pre>

<p>Then, in another template or layout, this code would render both links in order:</p>

<pre><code>&lt;ul&gt;&lt;%= content_for :navigation %&gt;&lt;/ul&gt;
</code></pre>

<p>If the flush parameter is <code>true</code> <code>content_for</code> replaces the blocks it is given. For example:</p>

<pre><code>&lt;% content_for :navigation do %&gt;
  &lt;li&gt;&lt;%= link_to &#39;Home&#39;, action: &#39;index&#39; %&gt;&lt;/li&gt;
&lt;% end %&gt;

&lt;%# Add some other content, or use a different template: %&gt;

&lt;% content_for :navigation, flush: true do %&gt;
  &lt;li&gt;&lt;%= link_to &#39;Login&#39;, action: &#39;login&#39; %&gt;&lt;/li&gt;
&lt;% end %&gt;
</code></pre>

<p>Then, in another template or layout, this code would render only the last link:</p>

<pre><code>&lt;ul&gt;&lt;%= content_for :navigation %&gt;&lt;/ul&gt;
</code></pre>

<p>Lastly, simple content can be passed as a parameter:</p>

<pre><code>&lt;% content_for :script, javascript_include_tag(:defaults) %&gt;
</code></pre>

<p>WARNING: <code>content_for</code> is ignored in caches. So you shouldn’t use it for elements that will be fragment cached.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-content_for_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionview/lib/action_view/helpers/capture_helper.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">content_for</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">content</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">content</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
      <span class="ruby-identifier">options</span> = <span class="ruby-identifier">content</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">content</span>
      <span class="ruby-identifier">content</span> = <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">content</span>
      <span class="ruby-identifier">options</span>[<span class="ruby-value">:flush</span>] <span class="ruby-operator">?</span> <span class="ruby-ivar">@view_flow</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">content</span>) <span class="ruby-operator">:</span> <span class="ruby-ivar">@view_flow</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">content</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@view_flow</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">presence</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-content_for-3F">
            
              content_for?(name)
            
          </h3>

          
            <div class="description">
              <p><code>content_for?</code> checks whether any content has been captured yet using <code>content_for</code>. Useful to render parts of your layout differently based on what is in your views.</p>

<pre><code>&lt;%# This is the layout %&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;title&gt;My Website&lt;/title&gt;
  &lt;%= yield :script %&gt;
&lt;/head&gt;
&lt;body class=&quot;&lt;%= content_for?(:right_col) ? &#39;two-column&#39; : &#39;one-column&#39; %&gt;&quot;&gt;
  &lt;%= yield %&gt;
  &lt;%= yield :right_col %&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-content_for-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionview/lib/action_view/helpers/capture_helper.rb, line 195</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">content_for?</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@view_flow</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-provide">
            
              provide(name, content = nil, &amp;block)
            
          </h3>

          
            <div class="description">
              <p>The same as <code>content_for</code> but when used with streaming flushes straight back to the layout. In other words, if you want to concatenate several times to the same buffer when rendering a given template, you should use <code>content_for</code>, if not, use <code>provide</code> to tell the layout to stop looking for more contents.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-provide_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionview/lib/action_view/helpers/capture_helper.rb, line 175</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">provide</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">content</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">content</span> = <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@view_flow</span>.<span class="ruby-identifier">append!</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">content</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">content</span>
  <span class="ruby-identifier">result</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">content</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>

        <footer class="site-footer">
          <!-- <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span> -->
        </footer>
      </main>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.1/anchor.min.js" integrity="sha512-zPB79j2C+3sFS9zcA3vg/z6bVKzJVEyu9pY5w89akQRys76zpAT2t6S3wZKla3QQ14O5l/Yt0RUQ/DHXx82Y5g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="/assets/js/app.js"></script>
  <script src="/assets/js/search.js"></script>
</body>
</html>
